<!doctype html>
<html amp lang="en">

<!-- Mirrored from arindamchat.wordpress.com/2017/01/27/azure-log-search-dashboard-and-designer-in-operations-manager-suits-oms/amp/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 21 Jun 2017 13:50:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
	
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Azure Log Search, Dashboard and Designer in Operations Manager Suits (OMS)" />
<meta property="og:url" content="../index.html" />
<meta property="og:description" content="This is in continuation of my previous post, Azure Log Analysis. In that post I have discussed how to configure log data collection from your server, next step will be analyze and visualize the dat…" />
<meta property="article:published_time" content="2017-01-27T13:16:25+00:00" />
<meta property="article:modified_time" content="2017-01-27T13:16:25+00:00" />
<meta property="og:site_name" content="Arindam&#039;s Blog" />
<meta property="og:image" content="../../../../../../arindamchat.files.wordpress.com/2017/01/28.png" />
<meta property="og:image:width" content="475" />
<meta property="og:image:height" content="367" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:site" content="@wordpressdotcom" />
<meta name="twitter:text:title" content="Azure Log Search, Dashboard and Designer in Operations Manager Suits (OMS)" />
<meta name="twitter:image" content="../../../../../../arindamchat.files.wordpress.com/2017/01/110d209.png?w=240" />
<meta name="twitter:card" content="summary" />
<meta property="fb:app_id" content="249643311490" />
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom" />
	<title>Azure Log Search, Dashboard and Designer in Operations Manager Suits (OMS) &#8211; Arindam&#039;s Blog</title>
		<link rel="canonical" href="../index.html" />
			<script custom-element="amp-ad" src="../../../../../../cdn.ampproject.org/v0/amp-ad-0.1.js" async></script>
		<script src="../../../../../../cdn.ampproject.org/v0.js" async></script>
			<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather:400,400italic,700,700italic">
		<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
		<script type="application/ld+json">{"@context":"http:\/\/schema.org","@type":"BlogPosting","mainEntityOfPage":"https:\/\/arindamchat.wordpress.com\/2017\/01\/27\/azure-log-search-dashboard-and-designer-in-operations-manager-suits-oms\/","publisher":{"@type":"Organization","name":"Arindam&#039;s Blog","logo":{"@type":"ImageObject","url":"https:\/\/secure.gravatar.com\/blavatar\/6fec2d116f8d27e63ee3e0e9473feaa7?s=60&d=https%3A%2F%2Fs2.wp.com%2Fi%2Ffavicons%2Fapple-touch-icon-60x60.png","width":60,"height":60}},"headline":"Azure Log Search, Dashboard and Designer in Operations Manager Suits (OMS)","datePublished":"2017-01-27T13:16:25+00:00","dateModified":"2017-01-27T13:16:25+00:00","author":{"@type":"Person","name":"Arindam C"},"image":{"@type":"ImageObject","url":"https:\/\/arindamchat.files.wordpress.com\/2017\/01\/110.png","width":544,"height":320}}</script>
		<style amp-custom>
		/* Generic WP styling */

.alignright {
	float: right;
}

.alignleft {
	float: left;
}

.aligncenter {
	display: block;
	margin-left: auto;
	margin-right: auto;
}

.amp-wp-enforced-sizes {
	/** Our sizes fallback is 100vw, and we have a padding on the container; the max-width here prevents the element from overflowing. **/
	max-width: 100%;
	margin: 0 auto;
}

.amp-wp-unknown-size img {
	/** Worst case scenario when we can't figure out dimensions for an image. **/
	/** Force the image into a box of fixed dimensions and use object-fit to scale. **/
	object-fit: contain;
}

/* Template Styles */

.amp-wp-content,
.amp-wp-title-bar div {
		margin: 0 auto;
	max-width: 712px;
	}

html {
	background: #0a89c0;
}

body {
	background: #fff;
	color: #353535;
	font-family: 'Merriweather', 'Times New Roman', Times, Serif;
	font-weight: 300;
	line-height: 1.75em;
}

p,
ol,
ul,
figure {
	margin: 0 0 1em;
	padding: 0;
}

a,
a:visited {
	color: #0a89c0;
}

a:hover,
a:active,
a:focus {
	color: #353535;
}

/* Quotes */

blockquote {
	color: #353535;
	background: rgba(127,127,127,.125);
	border-left: 2px solid #0a89c0;
	margin: 8px 0 24px 0;
	padding: 16px;
}

blockquote p:last-child {
	margin-bottom: 0;
}

/* UI Fonts */

.amp-wp-meta,
.amp-wp-header div,
.amp-wp-title,
.wp-caption-text,
.amp-wp-tax-category,
.amp-wp-tax-tag,
.amp-wp-comments-link,
.amp-wp-footer p,
.back-to-top {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen-Sans", "Ubuntu", "Cantarell", "Helvetica Neue", sans-serif;
}

/* Header */

.amp-wp-header {
	background-color: #0a89c0;
}

.amp-wp-header div {
	color: #fff;
	font-size: 1em;
	font-weight: 400;
	margin: 0 auto;
	max-width: calc(840px - 32px);
	padding: .875em 16px;
	position: relative;
}

.amp-wp-header a {
	color: #fff;
	text-decoration: none;
}

/* Site Icon */

.amp-wp-header .amp-wp-site-icon {
	/** site icon is 32px **/
	background-color: #fff;
	border: 1px solid #fff;
	border-radius: 50%;
	position: absolute;
	right: 18px;
	top: 10px;
}

/* Article */

.amp-wp-article {
	color: #353535;
	font-weight: 400;
	margin: 1.5em auto;
	max-width: 840px;
	overflow-wrap: break-word;
	word-wrap: break-word;
}

/* Article Header */

.amp-wp-article-header {
	align-items: center;
	align-content: stretch;
	display: flex;
	flex-wrap: wrap;
	justify-content: space-between;
	margin: 1.5em 16px 1.5em;
}

.amp-wp-title {
	color: #353535;
	display: block;
	flex: 1 0 100%;
	font-weight: 900;
	margin: 0 0 .625em;
	width: 100%;
}

/* Article Meta */

.amp-wp-meta {
	color: #696969;
	display: inline-block;
	flex: 2 1 50%;
	font-size: .875em;
	line-height: 1.5em;
	margin: 0;
	padding: 0;
}

.amp-wp-article-header .amp-wp-meta:last-of-type {
	text-align: right;
}

.amp-wp-article-header .amp-wp-meta:first-of-type {
	text-align: left;
}

.amp-wp-byline amp-img,
.amp-wp-byline .amp-wp-author {
	display: inline-block;
	vertical-align: middle;
}

.amp-wp-byline amp-img {
	border: 1px solid #0a89c0;
	border-radius: 50%;
	position: relative;
	margin-right: 6px;
}

.amp-wp-posted-on {
	text-align: right;
}

/* Featured image */

.amp-wp-article-featured-image {
	margin: 0 0 1em;
}
.amp-wp-article-featured-image amp-img {
	margin: 0 auto;
}
.amp-wp-article-featured-image.wp-caption .wp-caption-text {
	margin: 0 18px;
}

/* Article Content */

.amp-wp-article-content {
	margin: 0 16px;
}

.amp-wp-article-content ul,
.amp-wp-article-content ol {
	margin-left: 1em;
}

.amp-wp-article-content amp-img {
	margin: 0 auto;
}

.amp-wp-article-content amp-img.alignright {
	margin: 0 0 1em 16px;
}

.amp-wp-article-content amp-img.alignleft {
	margin: 0 16px 1em 0;
}

/* Captions */

.wp-caption {
	padding: 0;
}

.wp-caption.alignleft {
	margin-right: 16px;
}

.wp-caption.alignright {
	margin-left: 16px;
}

.wp-caption .wp-caption-text {
	border-bottom: 1px solid #c2c2c2;
	color: #696969;
	font-size: .875em;
	line-height: 1.5em;
	margin: 0;
	padding: .66em 10px .75em;
}

/* AMP Media */

amp-carousel {
	background: #c2c2c2;
	margin: 0 -16px 1.5em;
}
amp-iframe,
amp-youtube,
amp-instagram,
amp-vine {
	background: #c2c2c2;
	margin: 0 -16px 1.5em;
}

.amp-wp-article-content amp-carousel amp-img {
	border: none;
}

amp-carousel > amp-img > img {
	object-fit: contain;
}

.amp-wp-iframe-placeholder {
	background: #c2c2c2 url( ../../../../../../s2.wp.com/wp-content/plugins/amp/assets/images/placeholder-icon.png) no-repeat center 40%;
	background-size: 48px 48px;
	min-height: 48px;
}

/* Article Footer Meta */

.amp-wp-article-footer .amp-wp-meta {
	display: block;
}

.amp-wp-tax-category,
.amp-wp-tax-tag {
	color: #696969;
	font-size: .875em;
	line-height: 1.5em;
	margin: 1.5em 16px;
}

.amp-wp-comments-link {
	color: #696969;
	font-size: .875em;
	line-height: 1.5em;
	text-align: center;
	margin: 2.25em 0 1.5em;
}

.amp-wp-comments-link a {
	border-style: solid;
	border-color: #c2c2c2;
	border-width: 1px 1px 2px;
	border-radius: 4px;
	background-color: transparent;
	color: #0a89c0;
	cursor: pointer;
	display: block;
	font-size: 14px;
	font-weight: 600;
	line-height: 18px;
	margin: 0 auto;
	max-width: 200px;
	padding: 11px 16px;
	text-decoration: none;
	width: 50%;
	-webkit-transition: background-color 0.2s ease;
			transition: background-color 0.2s ease;
}

/* AMP Footer */

.amp-wp-footer {
	border-top: 1px solid #c2c2c2;
	margin: calc(1.5em - 1px) 0 0;
}

.amp-wp-footer div {
	margin: 0 auto;
	max-width: calc(840px - 32px);
	padding: 1.25em 16px 1.25em;
	position: relative;
}

.amp-wp-footer h2 {
	font-size: 1em;
	line-height: 1.375em;
	margin: 0 0 .5em;
}

.amp-wp-footer p {
	color: #696969;
	font-size: .8em;
	line-height: 1.5em;
	margin: 0 85px 0 0;
}

.amp-wp-footer a {
	text-decoration: none;
}

.back-to-top {
	bottom: 1.275em;
	font-size: .8em;
	font-weight: 600;
	line-height: 2em;
	position: absolute;
	right: 16px;
}
				/* WordAds */
		.wpcnt {
			text-align: center;
			line-height: 0;
			display: block;
			clear: both;
			margin: 1em 0;
		}

		.rtl .wpcnt {
			direction: ltr;
		}

		.wpa {
			position: relative;
			display: inline-block;
			max-width: 100%;
			text-align: left;
			padding: 10px 0 0;
			min-width: 300px;
			-webkit-transform: translate3d(0, 0, 0);
			transform: translate3d(0, 0, 0);
		}

		.wpa-about {
			position: absolute;
			top: 5px;
			left: 0;
			right: 0;
			display: block;
			min-width: 160px;
			border-bottom: none;
			font: 10px/1 "Open Sans", Arial, sans-serif;
			text-align: left;
			text-decoration: none;
			opacity: 0.85;
		}

		.wpa .u>div, .wpadvert>div>* {
			display: block;
			margin-top: 5px;
			margin-bottom: 1em;
		}

		div.wpa>div {
			margin-top: 10px;
		}/* Inline styles */
.amp-wp-inline-40e61f8af7aa709830a69202cb74cc6a{color:#008000;}.amp-wp-inline-56f42f65bf44ab0aee57f36713c8bf49{color:#ff0000;}.amp-wp-inline-f56e491a9b8cb65a6502fbf071f2f716{color:#0000ff;}	</style>
</head>

<body class="">

<header id="#top" class="amp-wp-header">
	<div>
		<a href="../../../../../index.html">
						Arindam&#039;s Blog		</a>
	</div>
</header>

<article class="amp-wp-article">

	<header class="amp-wp-article-header">
		<h1 class="amp-wp-title">Azure Log Search, Dashboard and Designer in Operations Manager Suits (OMS)</h1>
				<div class="amp-wp-meta amp-wp-byline">
					<amp-img src="https://secure.gravatar.com/avatar/e1684c9e7b0368aff778803d73e2c883?s=24&amp;d=identicon&amp;r=g" width="24" height="24" layout="fixed"></amp-img>
				<span class="amp-wp-author author vcard">Arindam C</span>
	</div>
<div class="amp-wp-meta amp-wp-posted-on">
	<time datetime="2017-01-27T13:16:25+00:00">
		5 months ago	</time>
</div>
	</header>

	
	<div class="amp-wp-article-content">
		<h2></h2>
<p>This is in continuation of my previous post, <a href="../../../25/operationmanagersuit-oms/index.html" target="_blank">Azure Log Analysis</a>. In that post I have discussed how to configure log data collection from your server, next step will be analyze and visualize the data collected. We have Log Search, Dashboard and Designers available for that in OMS portal.</p>
<p class="lf-text-block lf-block">In <strong>Log Search</strong> feature you can combine and correlate any machine data from multiple sources within your environment. On the Search page, you can create a query to filter the results. You can also create advanced queries to transform, filter, and report on your results, save and export the output.</p>
<p class="lf-text-block lf-block"><strong>Dashboard</strong> is used to create a visualization with the saved queries.</p>
<p class="lf-text-block lf-block"><strong>Designer</strong> is used to create  custom views in the OMS console that contain different visualizations of data in the OMS repository</p>
<h2>How to Search logs in Log Search:</h2>
<p>Before star, please check this niche article from MS: <a href="https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-log-searches">https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-log-searches</a> , this will give you a good idea how to do log search and the properties of various types of logs.</p>
<p>To perform Log Search you need to click on right icon as below</p>
<p><amp-img class="alignnone size-full wp-image-329 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/110bc78.png?w=712" alt="1" srcset="https://arindamchat.files.wordpress.com/2017/01/110.png 544w, https://arindamchat.files.wordpress.com/2017/01/110.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/110.png?w=300 300w" sizes="(min-width: 544px) 544px, 100vw" width="544" height="320"></amp-img></p>
<p>Some good points about Log search</p>
<ul><li>In the Log search page there are some default queries and filters present which can be readily used as shown below, you can then modify the query further.</li>
<li><amp-img class="alignnone size-full wp-image-330 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/25bc78.png?w=712" alt="2" srcset="https://arindamchat.files.wordpress.com/2017/01/25.png 354w, https://arindamchat.files.wordpress.com/2017/01/25.png?w=125 125w, https://arindamchat.files.wordpress.com/2017/01/25.png?w=250 250w" sizes="(min-width: 354px) 354px, 100vw" width="354" height="424"></amp-img></li>
</ul><ul><li>You can either use a filter for basic find of a query for more complex find.</li>
<li>The query syntax is pretty easy.</li>
<li>You can use Boolean operators, math operators, AND/OR, where, select, aggregate and group by features.</li>
<li>Pipe sign can also be used to pass a query output to another</li>
<li>Log properties are same as the log columns headers e.g. for IIS log there is a property called “csUserAgent” which you can find in the IIS log file also. So it’s easy to correlate.</li>
<li>There is intellisense while writing the query.</li>
<li>You can save your query</li>
<li>The query result can be viewed as table of graph, it’s possible to change graph type also.</li>
<li>You can create dashboard using the same query.</li>
<li>Query output can be exported to excel.</li>
</ul><h1>Use filters</h1>
<p>The most basic filters you can use are <em>keywords</em>, such as ‘error’ or ‘timeout’, or a computer name. These types of simple queries generally return diverse shapes of data within the same result set. This is because Log Analytics has different <em>types</em> of data in the system e.g. W3CIISLog is the IIS logtype, if you type “Type=” is the search box then you can see the available types.</p>
<p><amp-img class="alignnone size-full wp-image-331 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/31bc78.png?w=712" alt="3" srcset="https://arindamchat.files.wordpress.com/2017/01/31.png 421w, https://arindamchat.files.wordpress.com/2017/01/31.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/31.png?w=300 300w" sizes="(min-width: 421px) 421px, 100vw" width="421" height="343"></amp-img></p>
<p>You can also just type error or timeout to find specific type of entries.</p>
<h1>Use Queries</h1>
<p>But most of the time filters won’t help you much and often you need to write complex queries. Here I’m going to how write complex queries for IISLogs, but similar or same syntax can be used for other type of logs also like windows event logs or syslog or any type of custom logs.</p>
<p>To remind, I have connected to 3 Windows Computers and reading IISLog from there, you can check how to set that in my previous blog: <a href="../../../25/operationmanagersuit-oms/index.html" target="_blank">Azure Log Analysis</a>, and set to read IISlogs from connected computers.</p>
<p><amp-img class="alignnone size-full wp-image-332 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/41bc78.png?w=712" alt="4" srcset="https://arindamchat.files.wordpress.com/2017/01/41.png?w=712 712w, https://arindamchat.files.wordpress.com/2017/01/41.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/41.png?w=300 300w, https://arindamchat.files.wordpress.com/2017/01/41.png?w=768 768w, https://arindamchat.files.wordpress.com/2017/01/41.png?w=1024 1024w, https://arindamchat.files.wordpress.com/2017/01/41.png 1039w" sizes="(min-width: 712px) 712px, 100vw" width="712" height="145"></amp-img></p>
<p><amp-img class="alignnone size-full wp-image-333 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/51bc78.png?w=712" alt="5" srcset="https://arindamchat.files.wordpress.com/2017/01/51.png?w=712 712w, https://arindamchat.files.wordpress.com/2017/01/51.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/51.png?w=300 300w, https://arindamchat.files.wordpress.com/2017/01/51.png?w=768 768w, https://arindamchat.files.wordpress.com/2017/01/51.png 1018w" sizes="(min-width: 712px) 712px, 100vw" width="712" height="296"></amp-img></p>
<p>If your connection is good then you should see some logs when you click “All collected data” link in the “Log Search” area, this is a default query.</p>
<p><amp-img class="alignnone size-full wp-image-335 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/71bc78.png?w=712" alt="7" srcset="https://arindamchat.files.wordpress.com/2017/01/71.png 299w, https://arindamchat.files.wordpress.com/2017/01/71.png?w=150 150w" sizes="(min-width: 299px) 299px, 100vw" width="299" height="93"></amp-img></p>
<p>So I have lots of result, and by default this is shown as list.</p>
<p><amp-img class="alignnone size-full wp-image-336 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/81bc78.png?w=712" alt="8" srcset="https://arindamchat.files.wordpress.com/2017/01/81.png?w=712 712w, https://arindamchat.files.wordpress.com/2017/01/81.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/81.png?w=300 300w, https://arindamchat.files.wordpress.com/2017/01/81.png?w=768 768w, https://arindamchat.files.wordpress.com/2017/01/81.png 806w" sizes="(min-width: 712px) 712px, 100vw" width="712" height="625"></amp-img></p>
<p>You can change it to Table also</p>
<p><amp-img class="alignnone size-full wp-image-337 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/91bc78.png?w=712" alt="9" srcset="https://arindamchat.files.wordpress.com/2017/01/91.png?w=712 712w, https://arindamchat.files.wordpress.com/2017/01/91.png?w=1424 1424w, https://arindamchat.files.wordpress.com/2017/01/91.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/91.png?w=300 300w, https://arindamchat.files.wordpress.com/2017/01/91.png?w=768 768w, https://arindamchat.files.wordpress.com/2017/01/91.png?w=1024 1024w" sizes="(min-width: 712px) 712px, 100vw" width="712" height="286"></amp-img></p>
<p>Check the table headers; there are many more properties for IISLogs , you can check here: <a href="https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-data-sources-iis-logs">https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-data-sources-iis-logs</a> , but the table by default show these columns. If you add a column in the query that will appear as a column in the output.</p>
<p><amp-img class="alignnone size-full wp-image-338 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/101bc78.png?w=712" alt="10" srcset="https://arindamchat.files.wordpress.com/2017/01/101.png?w=712 712w, https://arindamchat.files.wordpress.com/2017/01/101.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/101.png?w=300 300w, https://arindamchat.files.wordpress.com/2017/01/101.png?w=768 768w, https://arindamchat.files.wordpress.com/2017/01/101.png?w=1024 1024w, https://arindamchat.files.wordpress.com/2017/01/101.png 1327w" sizes="(min-width: 712px) 712px, 100vw" width="712" height="27"></amp-img></p>
<p>Another interesting thing is the search box. Since you searched all data, this shows the wildcard filter *. We will write our queries here.</p>
<p><amp-img class="alignnone size-full wp-image-339 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/111bc78.png?w=712" alt="11" srcset="https://arindamchat.files.wordpress.com/2017/01/111.png 615w, https://arindamchat.files.wordpress.com/2017/01/111.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/111.png?w=300 300w" sizes="(min-width: 615px) 615px, 100vw" width="615" height="262"></amp-img></p>
<h3></h3>
<h3>Query Operator:</h3>
<p>Let’s search all the logs generated in last 24 hours. The query will be:</p>
<p><em>(Type=W3CIISLog) TimeGenerated&gt;NOW-24HOURS</em></p>
<p>Paste this query in the search bar and press enter. So the result shows all records generated on last 24 hours. You can change the query like</p>
<p>(<em>Type=W3CIISLog) TimeGenerated&gt;NOW-1Day</em></p>
<p>The result will be same</p>
<p><amp-img class="alignnone size-full wp-image-340 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/121bc78.png?w=712" alt="12" srcset="https://arindamchat.files.wordpress.com/2017/01/121.png 582w, https://arindamchat.files.wordpress.com/2017/01/121.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/121.png?w=300 300w" sizes="(min-width: 582px) 582px, 100vw" width="582" height="285"></amp-img></p>
<p>Let’s check the syntax of the query, this is pretty straight forward. Search logtype IIS for last 24 hours or 1 day, so keywords are Type and TimeGenrated, inputs are W§CIISLog and NOW and 24HOURS, operators are “-“, see the nice color coding below J</p>
<p><strong>(<span class="amp-wp-inline-f56e491a9b8cb65a6502fbf071f2f716">Type</span>=<span class="amp-wp-inline-40e61f8af7aa709830a69202cb74cc6a">W3CIISLog</span>) <span class="amp-wp-inline-f56e491a9b8cb65a6502fbf071f2f716">TimeGenerated</span><span class="amp-wp-inline-56f42f65bf44ab0aee57f36713c8bf49">&gt;</span><span class="amp-wp-inline-40e61f8af7aa709830a69202cb74cc6a">NOW</span><span class="amp-wp-inline-56f42f65bf44ab0aee57f36713c8bf49">–</span><span class="amp-wp-inline-40e61f8af7aa709830a69202cb74cc6a">24HOURS</span></strong></p>
<h3>Sort</h3>
<p>Let’s add sort on the above query, query will be as below, note the usage of pipe sign here. <em>(Type=W3CIISLog) TimeGenerated&gt;NOW-1Day | Sort TimeGenerated desc</em></p>
<p><amp-img class="alignnone size-full wp-image-341 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/131bc78.png?w=712" alt="13" srcset="https://arindamchat.files.wordpress.com/2017/01/131.png 462w, https://arindamchat.files.wordpress.com/2017/01/131.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/131.png?w=300 300w" sizes="(min-width: 462px) 462px, 100vw" width="462" height="237"></amp-img></p>
<h3>Limit and top</h3>
<p>Query: <em>(Type=W3CIISLog) TimeGenerated&gt;NOW-1Day | Sort TimeGenerated desc| Limit 3</em></p>
<p><amp-img class="alignnone size-full wp-image-341 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/131bc78.png?w=712" alt="13" srcset="https://arindamchat.files.wordpress.com/2017/01/131.png 462w, https://arindamchat.files.wordpress.com/2017/01/131.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/131.png?w=300 300w" sizes="(min-width: 462px) 462px, 100vw" width="462" height="237"></amp-img></p>
<h3>Select</h3>
<p>To select only the properties that you specify. Here I’m selecting Computer, Username, site name and time taken load the sites</p>
<p><em>(Type=W3CIISLog) TimeGenerated&gt;NOW-1Day | Sort TimeGenerated desc| Limit 3 | Select Computer,csUserName,sSiteName, TimeTaken</em></p>
<p><amp-img class="alignnone size-full wp-image-343 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/151bc78.png?w=712" alt="15" srcset="https://arindamchat.files.wordpress.com/2017/01/151.png?w=712 712w, https://arindamchat.files.wordpress.com/2017/01/151.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/151.png?w=300 300w, https://arindamchat.files.wordpress.com/2017/01/151.png?w=768 768w, https://arindamchat.files.wordpress.com/2017/01/151.png 815w" sizes="(min-width: 712px) 712px, 100vw" width="712" height="223"></amp-img></p>
<h3>Functions and Group By</h3>
<p>We often have to use functions like max, min, count, avg etc. To use them we need to use the keyword “Measure” e.g. Measure Max() and Measure Min()</p>
<p>Let’s try to find the log entry which needed max time to load in each server.</p>
<p><em>(Type=W3CIISLog) TimeGenerated&gt;NOW-1Day | Sort TimeGenerated desc | Measure Max (TimeTaken) by Computer</em></p>
<p><amp-img class="alignnone size-full wp-image-344 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/161bc78.png?w=712" alt="16" srcset="https://arindamchat.files.wordpress.com/2017/01/161.png?w=712 712w, https://arindamchat.files.wordpress.com/2017/01/161.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/161.png?w=300 300w, https://arindamchat.files.wordpress.com/2017/01/161.png?w=768 768w, https://arindamchat.files.wordpress.com/2017/01/161.png?w=1024 1024w, https://arindamchat.files.wordpress.com/2017/01/161.png 1119w" sizes="(min-width: 712px) 712px, 100vw" width="712" height="141"></amp-img></p>
<p>Now this query does not tell me what was the sites that is taking most time to load, so let’s modify the query further.</p>
<p><em>(Type=W3CIISLog) TimeGenerated&gt;NOW-1Day | Sort TimeGenerated desc | Measure Max (TimeTaken) by Computer, sSiteName</em></p>
<p>Notice the output here, when you are adding “by Computer, sSiteName”, you are actually adding group by here, so the result will be group by computers first and then by sites.</p>
<p><amp-img class="alignnone size-full wp-image-345 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/171bc78.png?w=712" alt="17" srcset="https://arindamchat.files.wordpress.com/2017/01/171.png?w=712 712w, https://arindamchat.files.wordpress.com/2017/01/171.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/171.png?w=300 300w, https://arindamchat.files.wordpress.com/2017/01/171.png?w=768 768w, https://arindamchat.files.wordpress.com/2017/01/171.png 888w" sizes="(min-width: 712px) 712px, 100vw" width="712" height="245"></amp-img></p>
<p>To get average time taken by each site in last 3days, check the part <em>NOW-3DAY..NOW. </em>This is between two dates.</p>
<p><em>(Type=W3CIISLog) TimeGenerated: [NOW-3DAY..NOW] | measure avg(TimeTaken) by sSiteName</em></p>
<p>To get number of users in last 3 days</p>
<p><em>(Type=W3CIISLog) TimeGenerated: [NOW-3DAY..NOW] | measure COUNT (csUserName) by sSiteName</em></p>
<p><amp-img class="alignnone size-full wp-image-346 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/181bc78.png?w=712" alt="18" srcset="https://arindamchat.files.wordpress.com/2017/01/181.png 630w, https://arindamchat.files.wordpress.com/2017/01/181.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/181.png?w=300 300w" sizes="(min-width: 630px) 630px, 100vw" width="630" height="231"></amp-img></p>
<p>Does the output look a bit awkward?  <strong>255750 users???</strong> Yea, you are not counting distinct users here, so the correct query will be</p>
<p><em>(Type=W3CIISLog) TimeGenerated: [NOW-3DAY..NOW] | measure COUNTDISTINCT (csUserName) by sSiteName</em></p>
<p>Now this looks correct 🙂<amp-img class="alignnone size-full wp-image-347 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/191bc78.png?w=712" alt="19" srcset="https://arindamchat.files.wordpress.com/2017/01/191.png 696w, https://arindamchat.files.wordpress.com/2017/01/191.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/191.png?w=300 300w" sizes="(min-width: 696px) 696px, 100vw" width="696" height="260"></amp-img></p>
<h3>Interval</h3>
<p>This is an interesting keyword. With real time log data collection, like this IISlogs, if you want check trends, this is very useful, e.g. let’s try to find how many requests are coming to sites in every 30 minutes. This is a good way to know when your server is busy maximum. The query will be like below</p>
<p><em>(Type=W3CIISLog) TimeGenerated: [NOW-3DAY..NOW] | measure COUNTDISTINCT (csMethod) by Computer ,sSiteName Interval 30MINUTES</em></p>
<p><amp-img class="alignnone size-full wp-image-348 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/201bc78.png?w=712" alt="20" srcset="https://arindamchat.files.wordpress.com/2017/01/201.png?w=712 712w, https://arindamchat.files.wordpress.com/2017/01/201.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/201.png?w=300 300w, https://arindamchat.files.wordpress.com/2017/01/201.png?w=768 768w, https://arindamchat.files.wordpress.com/2017/01/201.png 837w" sizes="(min-width: 712px) 712px, 100vw" width="712" height="300"></amp-img></p>
<p>Now to get a more visual idea, you can change the output to “Chart” as below</p>
<p><amp-img class="alignnone size-full wp-image-349 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/211bc78.png?w=712" alt="21" srcset="https://arindamchat.files.wordpress.com/2017/01/211.png?w=712 712w, https://arindamchat.files.wordpress.com/2017/01/211.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/211.png?w=300 300w, https://arindamchat.files.wordpress.com/2017/01/211.png?w=768 768w, https://arindamchat.files.wordpress.com/2017/01/211.png?w=1024 1024w, https://arindamchat.files.wordpress.com/2017/01/211.png 1091w" sizes="(min-width: 712px) 712px, 100vw" width="712" height="427"></amp-img></p>
<p>You can change this to bar by clicking the settings wheel on top right</p>
<p><amp-img class="alignnone size-full wp-image-350 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/221bc78.png?w=712" alt="22" srcset="https://arindamchat.files.wordpress.com/2017/01/221.png 453w, https://arindamchat.files.wordpress.com/2017/01/221.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/221.png?w=300 300w" sizes="(min-width: 453px) 453px, 100vw" width="453" height="247"></amp-img></p>
<p>And the output will be</p>
<p><amp-img class="alignnone size-full wp-image-351 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/231bc78.png?w=712" alt="23" srcset="https://arindamchat.files.wordpress.com/2017/01/231.png?w=712 712w, https://arindamchat.files.wordpress.com/2017/01/231.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/231.png?w=300 300w, https://arindamchat.files.wordpress.com/2017/01/231.png?w=768 768w, https://arindamchat.files.wordpress.com/2017/01/231.png?w=1024 1024w, https://arindamchat.files.wordpress.com/2017/01/231.png 1078w" sizes="(min-width: 712px) 712px, 100vw" width="712" height="388"></amp-img></p>
<h1>Saving Your Query</h1>
<p>So like this you can keep writing your own query, but it’s always good to save them, you can Save these queries using the Save button and they will be stored as “Favorites”, you can export the result also from here.</p>
<p><amp-img class="alignnone size-full wp-image-352 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/241bc78.png?w=712" alt="24" srcset="https://arindamchat.files.wordpress.com/2017/01/241.png 392w, https://arindamchat.files.wordpress.com/2017/01/241.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/241.png?w=300 300w" sizes="(min-width: 392px) 392px, 100vw" width="392" height="178"></amp-img></p>
<p>Your saved search will be in the right side of the window</p>
<p><amp-img class="alignnone size-full wp-image-353 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/251bc78.png?w=712" alt="25" srcset="https://arindamchat.files.wordpress.com/2017/01/251.png 474w, https://arindamchat.files.wordpress.com/2017/01/251.png?w=145 145w, https://arindamchat.files.wordpress.com/2017/01/251.png?w=289 289w" sizes="(min-width: 474px) 474px, 100vw" width="474" height="492"></amp-img></p>
<h1>Creating Dashboard</h1>
<p>Though you can save your queries, but it’s best to create a dashboard with the necessary queries so that you can always get a consolidated view. So click on dashboard.</p>
<p><amp-img class="alignnone  wp-image-354 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/266fcf.png?w=112&amp;h=207" alt="26" width="112" height="207" srcset="https://arindamchat.files.wordpress.com/2017/01/26.png?w=112&amp;h=207 112w, https://arindamchat.files.wordpress.com/2017/01/26.png?w=81&amp;h=150 81w, https://arindamchat.files.wordpress.com/2017/01/26.png 180w" sizes="(min-width: 112px) 112px, 100vw"></amp-img></p>
<p>Now if you click of the “Customize” wheel, you can see all your saved search has appeared, you have to use them.</p>
<p><amp-img class="alignnone size-full wp-image-355 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/27bc78.png?w=712" alt="27" srcset="https://arindamchat.files.wordpress.com/2017/01/27.png?w=712 712w, https://arindamchat.files.wordpress.com/2017/01/27.png?w=1424 1424w, https://arindamchat.files.wordpress.com/2017/01/27.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/27.png?w=300 300w, https://arindamchat.files.wordpress.com/2017/01/27.png?w=768 768w, https://arindamchat.files.wordpress.com/2017/01/27.png?w=1024 1024w" sizes="(min-width: 712px) 712px, 100vw" width="712" height="356"></amp-img></p>
<p>Let’s click on the first Saved query; it will add a tile in the dashboard.</p>
<p><amp-img class="alignnone size-full wp-image-356 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/28bc78.png?w=712" alt="28" srcset="https://arindamchat.files.wordpress.com/2017/01/28.png 475w, https://arindamchat.files.wordpress.com/2017/01/28.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/28.png?w=300 300w" sizes="(min-width: 475px) 475px, 100vw" width="475" height="367"></amp-img></p>
<p>If you want to change this to a graph, click on the tile and you will have the option to change the result type in the right side of the window</p>
<p><amp-img class="alignnone size-full wp-image-357 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/29bc78.png?w=712" alt="29" srcset="https://arindamchat.files.wordpress.com/2017/01/29.png?w=712 712w, https://arindamchat.files.wordpress.com/2017/01/29.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/29.png?w=300 300w, https://arindamchat.files.wordpress.com/2017/01/29.png?w=768 768w, https://arindamchat.files.wordpress.com/2017/01/29.png?w=1024 1024w, https://arindamchat.files.wordpress.com/2017/01/29.png 1297w" sizes="(min-width: 712px) 712px, 100vw" width="712" height="388"></amp-img></p>
<p>And the output will change</p>
<p><amp-img class="alignnone size-full wp-image-358 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/30bc78.png?w=712" alt="30" srcset="https://arindamchat.files.wordpress.com/2017/01/30.png 397w, https://arindamchat.files.wordpress.com/2017/01/30.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/30.png?w=300 300w" sizes="(min-width: 397px) 397px, 100vw" width="397" height="343"></amp-img></p>
<h1>Using Designer</h1>
<p>Now in dashboard, you can only add saved queries and you have limited options, but you can create a more interesting dashboard by using the designer. Again read this MS article to get more idea: <a href="https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-view-designer">https://docs.microsoft.com/en-us/azure/log-analytics/log-analytics-view-designer</a></p>
<p>Go to designer like below</p>
<p><amp-img class="alignnone size-full wp-image-359 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/311bc78.png?w=712" alt="31" srcset="https://arindamchat.files.wordpress.com/2017/01/311.png 695w, https://arindamchat.files.wordpress.com/2017/01/311.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/311.png?w=300 300w" sizes="(min-width: 695px) 695px, 100vw" width="695" height="439"></amp-img></p>
<p>To get idea how different charts will look, click on “+ View”, let’s choose “Two timelines &amp; list”, this will add a tile and the configuration pane at the right.</p>
<p><amp-img class="alignnone size-full wp-image-360 amp-wp-enforced-sizes" src="../../../../../../arindamchat.files.wordpress.com/2017/01/32bc78.png?w=712" alt="32" srcset="https://arindamchat.files.wordpress.com/2017/01/32.png?w=712 712w, https://arindamchat.files.wordpress.com/2017/01/32.png?w=1424 1424w, https://arindamchat.files.wordpress.com/2017/01/32.png?w=150 150w, https://arindamchat.files.wordpress.com/2017/01/32.png?w=300 300w, https://arindamchat.files.wordpress.com/2017/01/32.png?w=768 768w, https://arindamchat.files.wordpress.com/2017/01/32.png?w=1024 1024w" sizes="(min-width: 712px) 712px, 100vw" width="712" height="380"></amp-img></p>
<p>You can choose your own icon also here. But let’s do the, main configuration for first chart and 2<sup>nd</sup> chart. Put the sampls query <em>(Type=W3CIISLog) TimeGenerated: [NOW-3DAY..NOW] | measure COUNTDISTINCT (csMethod) by Computer ,sSiteName Interval 30MINUTES </em>in all the query fields i.e. for “First Chart”, “Second Chart” and “Navigation Query” at the bottom, you will have a output as above.</p>
		<div class="wpcnt">
			<div class="wpa wpmrec">
				<span class="wpa-about">Advertisements</span>
				<div class="u">
					<amp-ad width="300" height="250" type="pubmine" data-adsafe="0" data-section="2" data-siteid="2694" data-wordads="0"><div placeholder="" class="amp-wp-iframe-placeholder"></div>
					</amp-ad></div>
			</div>
		</div>	</div>

	<footer class="amp-wp-article-footer">
			<div class="amp-wp-meta amp-wp-tax-category">
		Categories: <a href="../../../../../category/azure/index.html" rel="category tag">Azure</a>	</div>

	<div class="amp-wp-meta amp-wp-tax-tag">
		Tags: <a href="../../../../../tag/azure/index.html" rel="tag">Azure</a>, <a href="../../../../../tag/iis-logs/index.html" rel="tag">IIS Logs</a>, <a href="../../../../../tag/iislogs/index.html" rel="tag">IISLogs</a>, <a href="../../../../../tag/log-analysis/index.html" rel="tag">Log Analysis</a>, <a href="../../../../../tag/log-search/index.html" rel="tag">Log Search</a>, <a href="../../../../../tag/logs/index.html" rel="tag">Logs</a>, <a href="../../../../../tag/oms/index.html" rel="tag">OMS</a>, <a href="../../../../../tag/operations-management-suite/index.html" rel="tag">Operations Management Suite</a>, <a href="../../../../../tag/sharepoint-logs/index.html" rel="tag">SharePoint logs</a>	</div>
		<div class="amp-wp-meta amp-wp-comments-link">
		<a href="../index.html#respond">
			Leave a Comment		</a>
	</div>
	</footer>

</article>

<footer class="amp-wp-footer">
	<div>
		<h2>Arindam&#039;s Blog</h2>
		<p>
			<a href="https://wordpress.com/?ref=footer_website">Create a free website or blog at WordPress.com.</a>
		</p>
		<a href="#top" class="back-to-top">Back to top</a>
	</div>
</footer>

	<amp-pixel src="../../../../../../pixel.wp.com/b640c.gif?rand=RANDOM&amp;host=arindamchat.wordpress.com&amp;ref=DOCUMENT_REFERRER&amp;amp=1&amp;blog=72867871&amp;v=wpcom&amp;tz=0&amp;user_id=0&amp;post=309&amp;subd=arindamchat"></amp-pixel>
	<amp-pixel src="../../../../../../pixel.wp.com/ba878.gif?rand=RANDOM&amp;v=wpcom-no-pv&amp;crypt=UE5XaGUuOTlwaD85flAmcm1mcmZsaDhkV11YdWFnNncxc1tjZG9XVXhRLWhqanhKV3x0UkRILjFhcVJaLG0%2FMEx1NjN1W0krTU9WPXRzXTdKMFpwTT1mRVEzZkNXa01aP2VJREdMOC1peDlaelMtbnx8bGFjRWw3c2wwTiVZYTl2T3RJSngueUp2bGc0OEw9QSZmVEFNNF9KbUx3XXdNRGxjTUkwUCZBVUpbOHwmQS5EeVB2WW9uREM2T0UwUW1yL3xFLlNBTk8%3D"></amp-pixel>
	
</body>

<!-- Mirrored from arindamchat.wordpress.com/2017/01/27/azure-log-search-dashboard-and-designer-in-operations-manager-suits-oms/amp/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 21 Jun 2017 13:50:32 GMT -->
</html>
